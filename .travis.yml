language: cpp
dist: trusty

sudo: required

jobs:
  include:
  - env: DOCKER_IMAGE=yadoms/build_for_raspberrypi${DOCKER_TAG_RPI}
  - env: DOCKER_IMAGE=yadoms/build_for_ubuntu${DOCKER_TAG_LINUX}
  - env: DOCKER_IMAGE=yadoms/build_for_macos${DOCKER_TAG_MACOS}
  - env: DOCKER_IMAGE=yadoms/build_for_synology218p${DOCKER_TAG_SYNO}
    
services:
  - docker
  
before_install:
  - docker pull ${DOCKER_IMAGE}
  
script:
  - docker run -it -e MAKE_PACKAGE=true -e YADOMS_BUILD_BRANCH=${YADOMS_BRANCH} -e UPLOAD_FTP_CREDENTIALS=${FTP_USER}:${FTP_PASSWORD} ${DOCKER_IMAGE} /entrypoint.sh
